# Silent-NAS 项目规划（PLAN）

## 项目总体目标和愿景
- 构建面向个人 / 家庭 / 小团队的分布式 NAS 系统。
- 提供统一的文件存储、索引搜索、多节点同步与多协议访问能力（WebDAV / S3 / HTTP）。
- 在保持简单易用的前提下，逐步演进为高可靠、高性能的个人云存储基础设施。

## 版本里程碑规划

- **v0.7.x（当前阶段）**
  - V2 存储架构重构（基于 silent-storage，Sled 元数据，CDC + 去重 + 压缩）。
  - WebDAV 协议与桌面客户端兼容性优化。
  - 大文件上传与索引性能优化。

- **v0.8.x（规划中）**
  - Web 管理控制台开发（基于 Vue 3 + Element Plus）。
  - 多节点同步增强（冲突解决策略、拓扑优化）。
  - 更完善的权限与认证体系。
  - 面向 UI / 前端的高层 API 优化。

## 功能优先级（当前关注）

1. 存储 V2 架构稳定性与性能（已在 TODO 中细化）。
2. WebDAV / S3 等外部协议在大文件场景下的体验优化。
3. 检索与审计（索引、事件流）的可观测性与调试能力。

当前任务重点：
- **Web 管理控制台开发（v0.8.0 - v0.9.0）**
  - 提供可视化的系统管理、文件管理、用户管理、监控和配置功能。
  - 技术栈：Vue 3 + Vite + Element Plus + TypeScript + Pinia。
  - 分阶段开发：基础框架 → 仪表盘监控 → 文件管理 → 用户管理 → 系统配置 → 高级功能。
  - 详细计划见：`docs/admin-dashboard-plan.md`。

- **WebDAV 大文件流式上传（v0.7.1 已完成）**
  - 避免 HTTP 层一次性将整个请求体读入内存。
  - 保持与现有 silent-storage 去重 / 压缩 / 版本链逻辑兼容。
  - 为后续实现续传 / 秒传铺路（需要额外协议设计）。

## 技术选型与架构说明

### 后端技术栈
- 存储引擎：`silent-storage`（增量存储 + 去重 + 压缩，基于 Sled 元数据）。
- Web 服务框架：`silent`（Rust Web 框架）。
- WebDAV 实现：`src/webdav`（基于 StorageManagerTrait + WebDavHandler）。
- ID 方案：全部使用 `scru128` 生成全局唯一 ID。

### 前端技术栈（管理控制台）
- 前端框架：Vue 3（Composition API）。
- 构建工具：Vite 5。
- UI 组件库：Element Plus。
- 状态管理：Pinia。
- 路由：Vue Router 4。
- HTTP 客户端：Axios。
- 图表库：ECharts（监控面板）。
- 类型安全：TypeScript。

## 关键时间节点

### 管理控制台开发
- 2025-12-03：创建 `feature/admin-dashboard` 分支，编写开发计划。
- 2025-12-03：完成管理控制台详细设计（`docs/admin-dashboard-plan.md`）。
- 预计 2025-12-17：完成 v0.8.0（基础框架与登录认证）。
- 预计 2026-01-14：完成 v0.8.1（仪表盘与监控）。
- 预计 2026-02-04：完成 v0.8.2（文件管理）。
- 预计 2026-02-18：完成 v0.8.3（用户管理）。
- 预计 2026-03-04：完成 v0.8.4（系统配置）。
- 预计 2026-03-25：完成 v0.9.0（高级功能）。

### WebDAV 大文件上传（已完成）
- 2025-11-18：发现大文件（>2GB）上传一次性读入内存导致异步处理占用较多资源的问题。
- 2025-11-18：规划并开始实现 WebDAV PUT 大文件流式上传（HTTP 层流式 + 后台异步持久化）。
- 2025-11-28：v0.7.1 开发完成（WebDAV 优化与监控完善）。
