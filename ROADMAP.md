# Silent-NAS 产品路线图

## 项目愿景

Silent-NAS 致力于构建一个高性能、易部署的分布式网络存储系统，支持多种协议，提供企业级的文件管理和同步能力。

---

## 版本规划

### v0.5.x - 基础平台完善 ✅ **当前版本**

**状态**: 已完成

**核心特性**:
- ✅ 多协议支持 (HTTP/gRPC/QUIC/WebDAV/S3)
- ✅ 文件存储与版本管理
- ✅ CRDT 文件同步框架
- ✅ 元数据搜索引擎
- ✅ 性能监控与审计日志
- ✅ 用户认证与基础授权

**关键指标**:
- 协议兼容性: 85%+
- 代码覆盖率: 86%+
- API 端点: 60+

---

### v0.6.0 - 分布式功能与协议完善 🎯 **开发中**

**当前阶段**: 开发进行中（未完成）

#### 核心目标

1. **分布式文件同步** ⚠️ 最高优先级
   - ✅ gRPC 传输通道（服务端/客户端、状态同步、协调器、管理 API）
   - 🟡 稳定性与一致性增强：请求/传输超时与重试（指数退避/错误分级）、端到端哈希校验、失败补偿重拉、自动同步参数化与指标、三节点压测（< 5s）、文档与调试指引

2. **WebDAV 协议完善**
   - ✅ 基础方法与能力：OPTIONS/PROPFIND/HEAD/GET/PUT/DELETE/MKCOL/MOVE/COPY、LOCK/UNLOCK、DeltaV 最小闭环（VERSION-CONTROL/REPORT）、简化 PROPPATCH、互通脚本
   - 🟡 待办增强：共享锁完整语义与冲突矩阵、LOCK Body 解析、If 头复杂表达式、PROPPATCH 命名空间与属性模型结构化、REPORT 扩展、客户端互通用例（Cyberduck/Nextcloud）

**关键指标**:
- 多节点同步延迟: < 5秒（三节点拓扑压测）
- WebDAV 客户端兼容: 95%+

---

### v0.7.0 - 性能优化与存储增强 🔮


#### 核心目标

1. **版本存储优化**
   - 增量存储与差异算法
   - 自动压缩与冷热分离
   - 跨文件块级去重

2. **搜索功能增强**
   - 文件内容全文搜索
   - 高级过滤与搜索建议
   - WebDAV/S3 搜索集成

3. **性能监控完善**
   - 更丰富的 Prometheus 指标
   - 性能基准测试套件
   - 缓存策略优化

4. （后续拓展预留）

**关键指标**:
- 存储空间节省: 40%+
- 搜索响应时间: < 100ms
- 并发连接支持: 1000+

---

### v0.8.0 - 分布式架构 🚀


#### 核心目标

1. **分布式存储系统**
   - 数据分片与一致性哈希
   - 多副本存储 (3副本)
   - 副本同步与恢复

2. **高可用性**
   - 节点故障检测
   - 自动故障转移
   - 数据恢复机制

3. **集群管理**
   - 节点动态加入/退出
   - 负载均衡
   - 健康检查与监控

**关键指标**:
- 数据可用性: 99.9%+
- 故障恢复时间: < 30秒
- 集群节点数: 支持 10+ 节点

---

### v1.0.0 - 生产就绪 🎉


#### 核心目标

1. **协议扩展**
   - NFS 协议支持
   - SMB/CIFS 协议支持
   - 多协议统一网关

2. （后续拓展预留）

3. **运维工具**
   - Web 管理控制台
   - 命令行管理工具
   - 自动化部署脚本

4. **文档与生态**
   - 完整的 API 文档
   - 部署与运维手册
   - 故障排查指南

**关键指标**:
- 协议兼容性: 95%+
- 生产环境部署: 10+ 案例
- 社区贡献者: 20+

---

## 技术演进路线

### 存储架构演进

```
Phase 1: 单节点文件系统 ✅
         └─ 本地存储 + 基础功能

Phase 2: 版本控制与同步 ✅
         └─ CRDT + 版本管理

Phase 3: 跨节点同步 🎯 (v0.6.0)
         └─ gRPC 传输 + 事件驱动

Phase 4: 分布式存储 🚀 (v0.8.0)
         └─ 数据分片 + 多副本

Phase 5: 生产级集群 🎉 (v1.0.0)
         └─ 高可用 + 自动恢复
```

### 协议支持演进

```
✅ HTTP/REST API        (v0.1.0)
✅ gRPC                 (v0.2.0)
✅ QUIC                 (v0.2.0)
✅ WebDAV 基础          (v0.3.0)
✅ S3 核心功能          (v0.4.0)
✅ S3 高级特性          (v0.5.0)
🎯 WebDAV 完整支持      (v0.6.0)
🔮 S3 企业级功能        (后续拓展)
🔮 NFS                 (v1.0.0)
🔮 SMB/CIFS            (v1.0.0)
```

### 认证与权限演进

```
✅ 基础角色权限         (v0.5.0)
✅ JWT Token 认证       (v0.5.0)
✅ 管理员 API           (v0.5.1)
✅ 登录安全增强         (v0.5.1)
🔮 路径级 ACL          (后续拓展)
🔮 用户组管理          (后续拓展)
🔮 用户配额            (后续拓展)
🔮 多租户隔离          (后续拓展)
🔮 完整 RBAC           (后续拓展)
```

---

## 关键里程碑

### ✅ Milestone 1: 基础平台
- 多协议支持完成
- 文件存储与版本管理
- CRDT 同步框架

### ✅ Milestone 2: 功能增强
- 搜索引擎集成
- 性能监控系统
- 审计日志系统
- 用户认证基础

### 🎯 Milestone 3: 分布式功能
- 跨节点同步完成
- WebDAV 高级功能

### 🔮 Milestone 4: 性能优化
- 版本存储优化
- 搜索功能完善

### 🚀 Milestone 5: 分布式架构
- 数据分片与副本
- 高可用集群
- 自动故障恢复

### 🎉 Milestone 6: 生产就绪
- NFS/SMB 协议
- Web 管理控制台
- 完整文档与工具

---

## 社区与生态

### 兼容性目标
- **客户端**: 兼容主流 NAS 客户端 (Nextcloud, FolderSync, Cyberduck 等)
- **工具**: 兼容 AWS CLI, MinIO Client, rclone 等
- **协议**: 符合 WebDAV RFC 4918, S3 API 标准

### 文档计划
- API 文档 (OpenAPI/Swagger)
- 部署指南 (Docker, Kubernetes)
- 运维手册 (监控、备份、恢复)
- 开发指南 (架构、贡献流程)

---

## 反馈与贡献

我们欢迎社区的反馈和贡献！

- **GitHub Issues**: 报告 Bug 或提出功能需求
- **Pull Requests**: 代码贡献
- **Discussions**: 技术讨论和问答

**联系方式**:
- GitHub: https://github.com/silent-rs/silent-nas

---

**详细的开发任务和进度**: 请查看 [TODO.md](TODO.md)

---

## 后续拓展（Enterprise）

以下为企业级相关功能，集中于后续拓展阶段规划：

- 权限与安全
  - 路径级访问控制列表（ACL）
  - 用户组与组权限管理
  - 用户存储配额管理
  - 完整 RBAC 权限系统
  - 审计与合规性报告
  - 数据加密（传输与静态）

- 多租户与隔离
  - 多租户隔离
  - 共享链接与外部协作

- 协议与对象存储增强（S3）
  - 对象标签（Tagging）
  - 对象访问控制列表（ACL）
  - 生命周期管理
  - 预签名 URL（Presigned URL）
  - CORS 配置
